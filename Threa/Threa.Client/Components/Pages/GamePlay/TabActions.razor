@* Actions Tab - For performing actions during gameplay *@

<div class="row">
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header bg-primary text-white">
                <strong>Standard Actions</strong>
                <span class="badge bg-light text-dark float-end">1 AP + 1 FAT</span>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-primary" disabled="@(!CanAct())">
                        Use Skill
                    </button>
                    <button class="btn btn-outline-danger" disabled="@(!CanAct())">
                        Attack
                    </button>
                    <button class="btn btn-outline-info" disabled="@(!CanAct())">
                        Cast Spell
                    </button>
                    <button class="btn btn-outline-secondary" disabled="@(!CanAct())">
                        Use Item
                    </button>
                </div>
            </div>
        </div>

        <div class="card mb-3">
            <div class="card-header bg-success text-white">
                <strong>Fatigue-Free Actions</strong>
                <span class="badge bg-light text-dark float-end">2 AP + 0 FAT</span>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-success" disabled="@(!CanActFatigueFree())">
                        Use Skill (No FAT)
                    </button>
                    <button class="btn btn-outline-success" disabled="@(!CanActFatigueFree())">
                        Attack (No FAT)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header bg-secondary text-white">
                <strong>Free Actions</strong>
                <span class="badge bg-light text-dark float-end">0 AP</span>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-secondary">
                        Speak
                    </button>
                    <button class="btn btn-outline-secondary">
                        Drop Item
                    </button>
                    <button class="btn btn-outline-secondary">
                        Quick Look
                    </button>
                </div>
            </div>
        </div>

        <div class="card mb-3">
            <div class="card-header bg-warning">
                <strong>Rest</strong>
            </div>
            <div class="card-body">
                <p class="text-muted small">Convert AP to FAT healing</p>
                <button class="btn btn-warning w-100" disabled="@(!CanRest())">
                    Rest (1 AP â†’ 1 FAT)
                </button>
            </div>
        </div>

        <div class="card">
            <div class="card-header bg-info text-white">
                <strong>Boost Options</strong>
            </div>
            <div class="card-body">
                <p class="text-muted small">Enhance your next action</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-info" disabled="@(!CanBoostAp())">
                        +1 AS (extra AP)
                    </button>
                    <button class="btn btn-outline-info" disabled="@(!CanBoostFat())">
                        +1 AS (extra FAT)
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@if (!CanAct())
{
    <div class="alert alert-warning mt-3">
        <strong>Cannot act:</strong> You need at least 1 AP and 1 FAT to perform standard actions.
    </div>
}

@code {
    [Parameter]
    public GameMechanics.CharacterEdit? Character { get; set; }

    [Parameter]
    public GameMechanics.GamePlay.TableEdit? Table { get; set; }

    private bool CanAct() =>
        Character?.ActionPoints.Available >= 1 &&
        Character?.Fatigue.Value >= 1 &&
        !Character.IsPassedOut;

    private bool CanActFatigueFree() =>
        Character?.ActionPoints.Available >= 2 &&
        !Character.IsPassedOut;

    private bool CanRest() =>
        Character?.ActionPoints.Available >= 1 &&
        Character?.Fatigue.Value < Character?.Fatigue.BaseValue;

    private bool CanBoostAp() =>
        Character?.ActionPoints.Available >= 2;

    private bool CanBoostFat() =>
        Character?.Fatigue.Value >= 2;
}
